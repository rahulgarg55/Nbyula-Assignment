{"ast":null,"code":"var _jsxFileName = \"E:\\\\appointment-scheduler-nbyula-main\\\\appointment-scheduler-nbyula-main\\\\appointment-scheduler-frontend\\\\src\\\\Signin.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { Redirect } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Signin = () => {\n  _s();\n\n  const [formState, setFormState] = useState({\n    email: \"\",\n    password: \"\",\n    redirectToReferer: false,\n    loading: false\n  });\n  const [successMessage, setSuccessMessage] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(\"\");\n\n  const handleChage = name => event => {\n    if (successMessage != \"\") {\n      setSuccessMessage(\"\");\n    }\n\n    if (errorMessage != \"\") {\n      setErrorMessage(\"\");\n    }\n\n    setFormState(params => ({ ...params,\n      // Reuse the previous properties\n      [name]: event.target.value // Overwrite the new ones\n\n    })); // setFormState({...formState,[name]:event.target.value});\n  };\n\n  const clickSubmit = async e => {\n    e.preventDefault();\n    setFormState(params => ({ ...params,\n      loading: true\n    })); // setFormState({...formState,loading:true});\n\n    const user = {\n      email: formState.email,\n      password: formState.password\n    }; // console.log(user);\n\n    axios.post(\"https://ganeshan-nbyula-appointments.herokuapp.com/auth/signin\", JSON.stringify(user), {\n      headers: {\n        \"Accept\": \"application/json\",\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(res => {\n      // console.log(res.data.message);\n      setSuccessMessage(res.data.message);\n      setFormState(params => ({ ...params,\n        email: \"\",\n        password: \"\"\n      })); // setFormState({\n      //     email:\"\",\n      //     password:\"\",\n      // });\n      // res.data.user.hashed_password=\"\";\n      // res.data.user.__v=\"\";\n\n      if (typeof window !== \"undefined\") {\n        // console.log(\"53 inside...\");\n        localStorage.setItem(\"jwt\", JSON.stringify(res.data));\n        setFormState(params => ({ ...params,\n          redirectToReferer: true\n        })); // setFormState({...formState,redirectToReferer:true})\n      } // console.log(res);\n\n\n      setFormState(params => ({ ...params,\n        loading: false\n      })); // setFormState({...formState,loading:false});\n\n      return res;\n    }).catch(err => {\n      // console.log(err);\n      // console.log(err.response.data.message);\n      // setFormState({...formState,error:err.response.data.message?err.response.data.message:err.response.data.validationError});\n      setErrorMessage(err.response.data.message ? err.response.data.message : err.response.data.validationError);\n      setFormState(params => ({ ...params,\n        loading: false\n      })); // setFormState({...formState,loading:false});\n\n      return err;\n    });\n  };\n\n  if (formState.redirectToReferer == true) {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 16\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container text-light\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"mt-5 mb-5\",\n      children: \"Sign In\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 21\n    }, this), errorMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-danger\",\n      children: errorMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 38\n    }, this), successMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-primary\",\n      children: successMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 40\n    }, this), formState.loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"jumbotron text-center\",\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 43\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"text-light\",\n          children: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          className: \"form-control\",\n          onChange: handleChage(\"email\"),\n          value: formState.email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"text-light\",\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          className: \"form-control\",\n          onChange: handleChage(\"password\"),\n          value: formState.password\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: clickSubmit,\n        className: \"btn btn-raised btn-primary\",\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 21\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 99,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Signin, \"8LREnmSN1k49HLBW9Vs1Tw6Scpc=\");\n\n_c = Signin;\nexport default Signin;\n\nvar _c;\n\n$RefreshReg$(_c, \"Signin\");","map":{"version":3,"names":["React","useState","axios","Redirect","Signin","formState","setFormState","email","password","redirectToReferer","loading","successMessage","setSuccessMessage","errorMessage","setErrorMessage","handleChage","name","event","params","target","value","clickSubmit","e","preventDefault","user","post","JSON","stringify","headers","then","res","data","message","window","localStorage","setItem","catch","err","response","validationError"],"sources":["E:/appointment-scheduler-nbyula-main/appointment-scheduler-nbyula-main/appointment-scheduler-frontend/src/Signin.js"],"sourcesContent":["import React,{useState} from \"react\";\nimport axios from \"axios\";\nimport { Redirect } from \"react-router-dom\";\nconst Signin=()=>{\n    const [formState,setFormState]=useState({\n        email:\"\",\n        password:\"\",\n        redirectToReferer:false,\n        loading:false\n    })\n    const [successMessage,setSuccessMessage]=useState(\"\");\n    const [errorMessage,setErrorMessage]=useState(\"\");\n    const handleChage=name=>(event)=>{\n        if(successMessage!=\"\")\n        {\n            setSuccessMessage(\"\");\n        }\n        if(errorMessage!=\"\")\n        {\n            setErrorMessage(\"\");\n        }\n        setFormState(params => ({\n            ...params,             // Reuse the previous properties\n            [name]: event.target.value, // Overwrite the new ones\n        }))\n        // setFormState({...formState,[name]:event.target.value});\n    }\n    const clickSubmit=async (e)=>{\n        e.preventDefault();\n        setFormState(params=>({\n            ...params,\n            loading:true\n        }))\n        // setFormState({...formState,loading:true});\n        const user={\n            email:formState.email,\n            password:formState.password\n        };\n        // console.log(user);\n        axios.post(\"https://ganeshan-nbyula-appointments.herokuapp.com/auth/signin\",\n        JSON.stringify(user),\n        {\n            headers:{\n                \"Accept\":\"application/json\",\n                \"Content-Type\":\"application/json\"\n            }\n        }\n        )\n        .then((res)=>{\n            // console.log(res.data.message);\n            setSuccessMessage(res.data.message);\n            setFormState(params=>({\n                ...params,\n                email:\"\",\n                password:\"\"\n            }))\n            // setFormState({\n            //     email:\"\",\n            //     password:\"\",\n            // });\n            // res.data.user.hashed_password=\"\";\n            // res.data.user.__v=\"\";\n            if(typeof window !==\"undefined\")\n            {\n                // console.log(\"53 inside...\");\n                localStorage.setItem(\"jwt\",JSON.stringify(res.data))\n                setFormState(params=>({\n                    ...params,\n                    redirectToReferer:true\n                }))\n                // setFormState({...formState,redirectToReferer:true})\n            }\n            // console.log(res);\n            setFormState(params=>({\n                ...params,\n                loading:false\n            }))\n            // setFormState({...formState,loading:false});\n            return res;\n        })\n        .catch((err)=>{\n            // console.log(err);\n            // console.log(err.response.data.message);\n            // setFormState({...formState,error:err.response.data.message?err.response.data.message:err.response.data.validationError});\n            setErrorMessage(err.response.data.message?err.response.data.message:err.response.data.validationError);\n            setFormState(params=>({\n                ...params,\n                loading:false\n            }))\n            // setFormState({...formState,loading:false});\n            return err;\n        })\n    }\n    if(formState.redirectToReferer==true)\n    {\n        return <Redirect to=\"/\"/>\n    }\n    return(\n        <div className=\"container text-light\">\n                    <h2 className=\"mt-5 mb-5\">Sign In</h2>\n                    {errorMessage && <div className=\"alert alert-danger\">{errorMessage}</div>}\n                    {successMessage && <div className=\"alert alert-primary\">{successMessage}</div>}\n                    {formState.loading && <div className=\"jumbotron text-center\">Loading...</div>}\n                    <form>\n                        <div className=\"form-group\">\n                            <label className=\"text-light\">Email</label>\n                            <input type=\"email\" className=\"form-control\" onChange={handleChage(\"email\")} value={formState.email}/>\n                        </div>\n                        <div className=\"form-group\">\n                            <label className=\"text-light\">Password</label>\n                            <input type=\"password\" className=\"form-control\" onChange={handleChage(\"password\")} value={formState.password}/>\n                        </div>\n                        <button onClick={clickSubmit} className=\"btn btn-raised btn-primary\">Submit</button>\n                    </form>\n        </div>\n    )\n}\n\nexport default Signin;"],"mappings":"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"},"metadata":{},"sourceType":"module"}